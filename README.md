# vk_face_collector
Face Task Queue Microservice

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–¥–∞—á–∏ –æ—Ç –±–æ—Ç–∞, —Å—Ç–∞–≤–∏—Ç –∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü.

üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ü—Ä–∏—ë–º –∑–∞–¥–∞—á –æ—Ç –±–æ—Ç–∞

–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:

job_id ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏

user_id ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

photo_id ‚Äî ID —Ñ–∞–π–ª–∞ –Ω–∞ Google Drive

metadata ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

priority ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏ (—á–µ–º –≤—ã—à–µ ‚Äî —Ç–µ–º —Ä–∞–Ω—å—à–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)

–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis Sorted Set –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á

–ó–∞–¥–∞—á–∏ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏

–ú–µ—Ç–æ–¥—ã:

enqueue_task(task: dict) ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å

dequeue_task() -> dict | None ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏–Ω–≥–ª—Ç–æ–Ω Logger

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

üîπ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Python 3.10+

FastAPI ‚Äî –¥–ª—è –ø—Ä–∏—ë–º–∞ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ REST API

Redis ‚Äî –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

Pydantic ‚Äî –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

Google Drive API ‚Äî –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ñ–∞–π–ª—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –±–æ—Ç–æ–º)

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ logging —Å —Å–∏–Ω–≥–ª—Ç–æ–Ω–æ–º Logger

üîπ –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
project/
‚îú‚îÄ app/
‚îÇ  ‚îú‚îÄ main.py             # FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ  ‚îú‚îÄ models.py           # Pydantic –º–æ–¥–µ–ª–∏: TaskRequest, TaskResponse
‚îÇ  ‚îú‚îÄ statuses.py         # Enum —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–¥–∞—á
‚îÇ  ‚îú‚îÄ task_queue.py       # –†–∞–±–æ—Ç–∞ —Å Redis –æ—á–µ—Ä–µ–¥—å—é
‚îÇ  ‚îú‚îÄ gdrive_manager.py   # –†–∞–±–æ—Ç–∞ —Å Google Drive (—Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–æ—Ç)
‚îÇ  ‚îî‚îÄ logger.py           # –°–∏–Ω–≥–ª—Ç–æ–Ω Logger
‚îú‚îÄ requirements.txt
‚îî‚îÄ README.md