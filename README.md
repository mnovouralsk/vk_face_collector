# vk_face_collector
**Face Task Queue Microservice**

ะะธะบัะพัะตัะฒะธั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะทะฐะดะฐัะฐะผะธ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะปะธั. ะัะธะฝะธะผะฐะตั ะทะฐะดะฐัะธ ะพั ะฑะพัะฐ, ััะฐะฒะธั ะธั ะฒ ะพัะตัะตะดั ั ะฟะพะดะดะตัะถะบะพะน ะฟัะธะพัะธัะตัะพะฒ ะธ ะฟะตัะตะดะฐะตั ะธั ะฝะฐ ะพะฑัะฐะฑะพัะบั ะผะธะบัะพัะตัะฒะธัั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ะปะธั.

---

## ๐น ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

### 1. ะัะธัะผ ะทะฐะดะฐั ะพั ะฑะพัะฐ
ะะฐะถะดะฐั ะทะฐะดะฐัะฐ ัะพะดะตัะถะธั:
- `job_id` โ ัะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั ะทะฐะดะฐัะธ
- `user_id` โ ะธะดะตะฝัะธัะธะบะฐัะพั ะฟะพะปัะทะพะฒะฐัะตะปั
- `photo_id` โ ID ัะฐะนะปะฐ ะฝะฐ Google Drive
- `metadata` โ ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะดะฐะฝะฝัะต
- `priority` โ ะฟัะธะพัะธัะตั ะทะฐะดะฐัะธ (ัะตะผ ะฒััะต โ ัะตะผ ัะฐะฝััะต ะฒัะฟะพะปะฝัะตััั)

### 2. ะัะตัะตะดั ะทะฐะดะฐั ั ะฟัะธะพัะธัะตัะฐะผะธ
- ะัะฟะพะปัะทัะตััั **Redis Sorted Set** ะดะปั ััะฐะฝะตะฝะธั ะทะฐะดะฐั
- ะะฐะดะฐัะธ ั ะฝะฐะธะฑะพะปััะธะผ ะฟัะธะพัะธัะตัะพะผ ะฒัะฟะพะปะฝััััั ะฟะตัะฒัะผะธ
- ะะตัะพะดั:
  - `enqueue_task(task: dict)` โ ะดะพะฑะฐะฒะธัั ะทะฐะดะฐัั ะฒ ะพัะตัะตะดั
  - `dequeue_task() -> dict | None` โ ะฟะพะปััะธัั ัะปะตะดััััั ะทะฐะดะฐัั

### 3. ะะพะณะธัะพะฒะฐะฝะธะต
- ะัะต ะดะตะนััะฒะธั ะปะพะณะธัััััั ัะตัะตะท **ัะธะฝะณะปัะพะฝ Logger**
- ะะพะณะธ ัะพััะฐะฝััััั ะฒ ัะฐะนะป ะธ ะฒัะฒะพะดัััั ะฒ ะบะพะฝัะพะปั

---

## ๐น ะขะตัะฝะพะปะพะณะธะธ

- **Python 3.10+**
- **FastAPI** โ ะดะปั ะฟัะธัะผะฐ ะทะฐะดะฐั ัะตัะตะท REST API
- **Redis** โ ะดะปั ะพัะตัะตะดะธ ะทะฐะดะฐั ั ะฟะพะดะดะตัะถะบะพะน ะฟัะธะพัะธัะตัะพะฒ
- **Pydantic** โ ะดะปั ะฒะฐะปะธะดะฐัะธะธ ะธ ัะตัะธะฐะปะธะทะฐัะธะธ ะดะฐะฝะฝัั
- **Google Drive API** โ ะดะปั ััะฐะฝะตะฝะธั ะธะทะพะฑัะฐะถะตะฝะธะน (ัะฐะนะปั ะฟะตัะตะดะฐัััั ะฑะพัะพะผ)
- **logging** โ ั ัะธะฝะณะปัะพะฝะพะผ Logger

---

## ๐น ะัะธะผะตั ััััะบัััั ะฟัะพะตะบัะฐ

vk_face_collector/
โโโ app/ # ะัะฝะพะฒะฝะพะน ะบะพะด ะผะธะบัะพัะตัะฒะธัะฐ
โ โโโ main.py # FastAPI ัะฝะดะฟะพะธะฝัั
โ โโโ models.py # Pydantic ะผะพะดะตะปะธ: TaskRequest, TaskResponse
โ โโโ statuses.py # Enum ััะฐัััะพะฒ ะทะฐะดะฐั ะธ ัะฐะนะปะพะฒ
โ โโโ task_queue.py # ะะฐะฑะพัะฐ ั Redis ะพัะตัะตะดัั ะทะฐะดะฐั
โ โโโ gdrive_manager.py # ะะฐะฑะพัะฐ ั Google Drive (ะฑะพั ะทะฐะณััะถะฐะตั ัะฐะนะปั)
โ โโโ fileManager.py # ะฃัะธะปะธัั ะดะปั ัะฐะฑะพัั ั ัะฐะนะปะฐะผะธ
โ โโโ logger.py # ะกะธะฝะณะปัะพะฝ Logger ะดะปั ะปะพะณะธัะพะฒะฐะฝะธั
โโโ tests/ # ะขะตััั ะผะธะบัะพัะตัะฒะธัะฐ
โ โโโ test_main.py
โ โโโ test_task_queue.py
โโโ requirements.txt # ะะฐะฒะธัะธะผะพััะธ ะฟัะพะตะบัะฐ
โโโ config.py # ะะพะฝัะธะณััะฐัะธะธ (Redis URL, ะฟััะธ, ัะพะบะตะฝั)
โโโ errors.py # ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัะต ะบะพะดั ะพัะธะฑะพะบ
โโโ README.md # ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ